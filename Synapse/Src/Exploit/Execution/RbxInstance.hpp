
/*
*
*	SYNAPSE X
*	File.:	RbxInstance.hpp
*	Desc.:	C++ Roblox instances library
*
*/

#pragma once

#include "../Misc/Static.hpp"
#define BoundsCheckInstance() if (!instance_ptr) throw SynException(SYNAPSE_ERR_INVALID_INST)

namespace syn
{
	class Instance
	{
	protected:
		DWORD instance_ptr;

	public:
		Instance GetParent() const;
		std::vector<Instance> GetChildren() const;
		Instance GetChildFromName(const char* InstanceName) const;
		Instance GetChildFromClassName(const char* ClassName) const;
		std::string GetInstanceName(DWORD Inst = 0) const;
		std::string GetInstanceClassName(DWORD Inst = 0) const;
		bool IsEmpty() const { return !instance_ptr; }
		bool IsRobloxLocked() const { BoundsCheckInstance(); return *(BYTE*)(instance_ptr + 0x27); }
		Instance GetLocalPlayer() const { BoundsCheckInstance(); return *(DWORD*)(instance_ptr + 0xC8); }
		operator DWORD() const { return instance_ptr; }
		Instance(DWORD Address)
		{
			instance_ptr = Address;
		}
	};
}